# This file was auto-generated by Fern from our API Definition.

from __future__ import annotations

import typing

import httpx
from .core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from .environment import StratifyXEnvironment

if typing.TYPE_CHECKING:
    from .documentation.client import AsyncDocumentationClient, DocumentationClient
    from .health.client import AsyncHealthClient, HealthClient
    from .metadata.client import AsyncMetadataClient, MetadataClient
    from .script_validation.client import AsyncScriptValidationClient, ScriptValidationClient
    from .studies.client import AsyncStudiesClient, StudiesClient
    from .studies_account.client import AsyncStudiesAccountClient, StudiesAccountClient
    from .studies_analytics.client import AsyncStudiesAnalyticsClient, StudiesAnalyticsClient
    from .studies_definitions.client import AsyncStudiesDefinitionsClient, StudiesDefinitionsClient
    from .studies_event_markers.client import AsyncStudiesEventMarkersClient, StudiesEventMarkersClient
    from .studies_events.client import AsyncStudiesEventsClient, StudiesEventsClient
    from .studies_executions.client import AsyncStudiesExecutionsClient, StudiesExecutionsClient
    from .studies_metrics.client import AsyncStudiesMetricsClient, StudiesMetricsClient
    from .studies_monte_carlo.client import AsyncStudiesMonteCarloClient, StudiesMonteCarloClient
    from .studies_orders.client import AsyncStudiesOrdersClient, StudiesOrdersClient
    from .studies_performance.client import AsyncStudiesPerformanceClient, StudiesPerformanceClient
    from .studies_positions.client import AsyncStudiesPositionsClient, StudiesPositionsClient
    from .studies_tables.client import AsyncStudiesTablesClient, StudiesTablesClient


class StratifyX:
    """
    Use this class to access the different functions within the SDK. You can instantiate any number of clients with different configuration that will propagate to these functions.

    Parameters
    ----------
    base_url : typing.Optional[str]
        The base url to use for requests from the client.

    environment : StratifyXEnvironment
        The environment to use for requests from the client. from .environment import StratifyXEnvironment



        Defaults to StratifyXEnvironment.DEFAULT



    token : typing.Optional[typing.Union[str, typing.Callable[[], str]]]
    headers : typing.Optional[typing.Dict[str, str]]
        Additional headers to send with every request.

    timeout : typing.Optional[float]
        The timeout to be used, in seconds, for requests. By default the timeout is 60 seconds, unless a custom httpx client is used, in which case this default is not enforced.

    follow_redirects : typing.Optional[bool]
        Whether the default httpx client follows redirects or not, this is irrelevant if a custom httpx client is passed in.

    httpx_client : typing.Optional[httpx.Client]
        The httpx client to use for making requests, a preconfigured client is used by default, however this is useful should you want to pass in any custom httpx configuration.

    Examples
    --------
    from stratifyx import StratifyX

    client = StratifyX(
        token="YOUR_TOKEN",
    )
    """

    def __init__(
        self,
        *,
        base_url: typing.Optional[str] = None,
        environment: StratifyXEnvironment = StratifyXEnvironment.DEFAULT,
        token: typing.Optional[typing.Union[str, typing.Callable[[], str]]] = None,
        headers: typing.Optional[typing.Dict[str, str]] = None,
        timeout: typing.Optional[float] = None,
        follow_redirects: typing.Optional[bool] = True,
        httpx_client: typing.Optional[httpx.Client] = None,
    ):
        _defaulted_timeout = (
            timeout if timeout is not None else 60 if httpx_client is None else httpx_client.timeout.read
        )
        self._client_wrapper = SyncClientWrapper(
            base_url=_get_base_url(base_url=base_url, environment=environment),
            token=token,
            headers=headers,
            httpx_client=httpx_client
            if httpx_client is not None
            else httpx.Client(timeout=_defaulted_timeout, follow_redirects=follow_redirects)
            if follow_redirects is not None
            else httpx.Client(timeout=_defaulted_timeout),
            timeout=_defaulted_timeout,
        )
        self._health: typing.Optional[HealthClient] = None
        self._metadata: typing.Optional[MetadataClient] = None
        self._script_validation: typing.Optional[ScriptValidationClient] = None
        self._documentation: typing.Optional[DocumentationClient] = None
        self._studies: typing.Optional[StudiesClient] = None
        self._studies_definitions: typing.Optional[StudiesDefinitionsClient] = None
        self._studies_executions: typing.Optional[StudiesExecutionsClient] = None
        self._studies_events: typing.Optional[StudiesEventsClient] = None
        self._studies_tables: typing.Optional[StudiesTablesClient] = None
        self._studies_analytics: typing.Optional[StudiesAnalyticsClient] = None
        self._studies_performance: typing.Optional[StudiesPerformanceClient] = None
        self._studies_metrics: typing.Optional[StudiesMetricsClient] = None
        self._studies_account: typing.Optional[StudiesAccountClient] = None
        self._studies_orders: typing.Optional[StudiesOrdersClient] = None
        self._studies_positions: typing.Optional[StudiesPositionsClient] = None
        self._studies_event_markers: typing.Optional[StudiesEventMarkersClient] = None
        self._studies_monte_carlo: typing.Optional[StudiesMonteCarloClient] = None

    @property
    def health(self):
        if self._health is None:
            from .health.client import HealthClient  # noqa: E402

            self._health = HealthClient(client_wrapper=self._client_wrapper)
        return self._health

    @property
    def metadata(self):
        if self._metadata is None:
            from .metadata.client import MetadataClient  # noqa: E402

            self._metadata = MetadataClient(client_wrapper=self._client_wrapper)
        return self._metadata

    @property
    def script_validation(self):
        if self._script_validation is None:
            from .script_validation.client import ScriptValidationClient  # noqa: E402

            self._script_validation = ScriptValidationClient(client_wrapper=self._client_wrapper)
        return self._script_validation

    @property
    def documentation(self):
        if self._documentation is None:
            from .documentation.client import DocumentationClient  # noqa: E402

            self._documentation = DocumentationClient(client_wrapper=self._client_wrapper)
        return self._documentation

    @property
    def studies(self):
        if self._studies is None:
            from .studies.client import StudiesClient  # noqa: E402

            self._studies = StudiesClient(client_wrapper=self._client_wrapper)
        return self._studies

    @property
    def studies_definitions(self):
        if self._studies_definitions is None:
            from .studies_definitions.client import StudiesDefinitionsClient  # noqa: E402

            self._studies_definitions = StudiesDefinitionsClient(client_wrapper=self._client_wrapper)
        return self._studies_definitions

    @property
    def studies_executions(self):
        if self._studies_executions is None:
            from .studies_executions.client import StudiesExecutionsClient  # noqa: E402

            self._studies_executions = StudiesExecutionsClient(client_wrapper=self._client_wrapper)
        return self._studies_executions

    @property
    def studies_events(self):
        if self._studies_events is None:
            from .studies_events.client import StudiesEventsClient  # noqa: E402

            self._studies_events = StudiesEventsClient(client_wrapper=self._client_wrapper)
        return self._studies_events

    @property
    def studies_tables(self):
        if self._studies_tables is None:
            from .studies_tables.client import StudiesTablesClient  # noqa: E402

            self._studies_tables = StudiesTablesClient(client_wrapper=self._client_wrapper)
        return self._studies_tables

    @property
    def studies_analytics(self):
        if self._studies_analytics is None:
            from .studies_analytics.client import StudiesAnalyticsClient  # noqa: E402

            self._studies_analytics = StudiesAnalyticsClient(client_wrapper=self._client_wrapper)
        return self._studies_analytics

    @property
    def studies_performance(self):
        if self._studies_performance is None:
            from .studies_performance.client import StudiesPerformanceClient  # noqa: E402

            self._studies_performance = StudiesPerformanceClient(client_wrapper=self._client_wrapper)
        return self._studies_performance

    @property
    def studies_metrics(self):
        if self._studies_metrics is None:
            from .studies_metrics.client import StudiesMetricsClient  # noqa: E402

            self._studies_metrics = StudiesMetricsClient(client_wrapper=self._client_wrapper)
        return self._studies_metrics

    @property
    def studies_account(self):
        if self._studies_account is None:
            from .studies_account.client import StudiesAccountClient  # noqa: E402

            self._studies_account = StudiesAccountClient(client_wrapper=self._client_wrapper)
        return self._studies_account

    @property
    def studies_orders(self):
        if self._studies_orders is None:
            from .studies_orders.client import StudiesOrdersClient  # noqa: E402

            self._studies_orders = StudiesOrdersClient(client_wrapper=self._client_wrapper)
        return self._studies_orders

    @property
    def studies_positions(self):
        if self._studies_positions is None:
            from .studies_positions.client import StudiesPositionsClient  # noqa: E402

            self._studies_positions = StudiesPositionsClient(client_wrapper=self._client_wrapper)
        return self._studies_positions

    @property
    def studies_event_markers(self):
        if self._studies_event_markers is None:
            from .studies_event_markers.client import StudiesEventMarkersClient  # noqa: E402

            self._studies_event_markers = StudiesEventMarkersClient(client_wrapper=self._client_wrapper)
        return self._studies_event_markers

    @property
    def studies_monte_carlo(self):
        if self._studies_monte_carlo is None:
            from .studies_monte_carlo.client import StudiesMonteCarloClient  # noqa: E402

            self._studies_monte_carlo = StudiesMonteCarloClient(client_wrapper=self._client_wrapper)
        return self._studies_monte_carlo


class AsyncStratifyX:
    """
    Use this class to access the different functions within the SDK. You can instantiate any number of clients with different configuration that will propagate to these functions.

    Parameters
    ----------
    base_url : typing.Optional[str]
        The base url to use for requests from the client.

    environment : StratifyXEnvironment
        The environment to use for requests from the client. from .environment import StratifyXEnvironment



        Defaults to StratifyXEnvironment.DEFAULT



    token : typing.Optional[typing.Union[str, typing.Callable[[], str]]]
    headers : typing.Optional[typing.Dict[str, str]]
        Additional headers to send with every request.

    timeout : typing.Optional[float]
        The timeout to be used, in seconds, for requests. By default the timeout is 60 seconds, unless a custom httpx client is used, in which case this default is not enforced.

    follow_redirects : typing.Optional[bool]
        Whether the default httpx client follows redirects or not, this is irrelevant if a custom httpx client is passed in.

    httpx_client : typing.Optional[httpx.AsyncClient]
        The httpx client to use for making requests, a preconfigured client is used by default, however this is useful should you want to pass in any custom httpx configuration.

    Examples
    --------
    from stratifyx import AsyncStratifyX

    client = AsyncStratifyX(
        token="YOUR_TOKEN",
    )
    """

    def __init__(
        self,
        *,
        base_url: typing.Optional[str] = None,
        environment: StratifyXEnvironment = StratifyXEnvironment.DEFAULT,
        token: typing.Optional[typing.Union[str, typing.Callable[[], str]]] = None,
        headers: typing.Optional[typing.Dict[str, str]] = None,
        timeout: typing.Optional[float] = None,
        follow_redirects: typing.Optional[bool] = True,
        httpx_client: typing.Optional[httpx.AsyncClient] = None,
    ):
        _defaulted_timeout = (
            timeout if timeout is not None else 60 if httpx_client is None else httpx_client.timeout.read
        )
        self._client_wrapper = AsyncClientWrapper(
            base_url=_get_base_url(base_url=base_url, environment=environment),
            token=token,
            headers=headers,
            httpx_client=httpx_client
            if httpx_client is not None
            else httpx.AsyncClient(timeout=_defaulted_timeout, follow_redirects=follow_redirects)
            if follow_redirects is not None
            else httpx.AsyncClient(timeout=_defaulted_timeout),
            timeout=_defaulted_timeout,
        )
        self._health: typing.Optional[AsyncHealthClient] = None
        self._metadata: typing.Optional[AsyncMetadataClient] = None
        self._script_validation: typing.Optional[AsyncScriptValidationClient] = None
        self._documentation: typing.Optional[AsyncDocumentationClient] = None
        self._studies: typing.Optional[AsyncStudiesClient] = None
        self._studies_definitions: typing.Optional[AsyncStudiesDefinitionsClient] = None
        self._studies_executions: typing.Optional[AsyncStudiesExecutionsClient] = None
        self._studies_events: typing.Optional[AsyncStudiesEventsClient] = None
        self._studies_tables: typing.Optional[AsyncStudiesTablesClient] = None
        self._studies_analytics: typing.Optional[AsyncStudiesAnalyticsClient] = None
        self._studies_performance: typing.Optional[AsyncStudiesPerformanceClient] = None
        self._studies_metrics: typing.Optional[AsyncStudiesMetricsClient] = None
        self._studies_account: typing.Optional[AsyncStudiesAccountClient] = None
        self._studies_orders: typing.Optional[AsyncStudiesOrdersClient] = None
        self._studies_positions: typing.Optional[AsyncStudiesPositionsClient] = None
        self._studies_event_markers: typing.Optional[AsyncStudiesEventMarkersClient] = None
        self._studies_monte_carlo: typing.Optional[AsyncStudiesMonteCarloClient] = None

    @property
    def health(self):
        if self._health is None:
            from .health.client import AsyncHealthClient  # noqa: E402

            self._health = AsyncHealthClient(client_wrapper=self._client_wrapper)
        return self._health

    @property
    def metadata(self):
        if self._metadata is None:
            from .metadata.client import AsyncMetadataClient  # noqa: E402

            self._metadata = AsyncMetadataClient(client_wrapper=self._client_wrapper)
        return self._metadata

    @property
    def script_validation(self):
        if self._script_validation is None:
            from .script_validation.client import AsyncScriptValidationClient  # noqa: E402

            self._script_validation = AsyncScriptValidationClient(client_wrapper=self._client_wrapper)
        return self._script_validation

    @property
    def documentation(self):
        if self._documentation is None:
            from .documentation.client import AsyncDocumentationClient  # noqa: E402

            self._documentation = AsyncDocumentationClient(client_wrapper=self._client_wrapper)
        return self._documentation

    @property
    def studies(self):
        if self._studies is None:
            from .studies.client import AsyncStudiesClient  # noqa: E402

            self._studies = AsyncStudiesClient(client_wrapper=self._client_wrapper)
        return self._studies

    @property
    def studies_definitions(self):
        if self._studies_definitions is None:
            from .studies_definitions.client import AsyncStudiesDefinitionsClient  # noqa: E402

            self._studies_definitions = AsyncStudiesDefinitionsClient(client_wrapper=self._client_wrapper)
        return self._studies_definitions

    @property
    def studies_executions(self):
        if self._studies_executions is None:
            from .studies_executions.client import AsyncStudiesExecutionsClient  # noqa: E402

            self._studies_executions = AsyncStudiesExecutionsClient(client_wrapper=self._client_wrapper)
        return self._studies_executions

    @property
    def studies_events(self):
        if self._studies_events is None:
            from .studies_events.client import AsyncStudiesEventsClient  # noqa: E402

            self._studies_events = AsyncStudiesEventsClient(client_wrapper=self._client_wrapper)
        return self._studies_events

    @property
    def studies_tables(self):
        if self._studies_tables is None:
            from .studies_tables.client import AsyncStudiesTablesClient  # noqa: E402

            self._studies_tables = AsyncStudiesTablesClient(client_wrapper=self._client_wrapper)
        return self._studies_tables

    @property
    def studies_analytics(self):
        if self._studies_analytics is None:
            from .studies_analytics.client import AsyncStudiesAnalyticsClient  # noqa: E402

            self._studies_analytics = AsyncStudiesAnalyticsClient(client_wrapper=self._client_wrapper)
        return self._studies_analytics

    @property
    def studies_performance(self):
        if self._studies_performance is None:
            from .studies_performance.client import AsyncStudiesPerformanceClient  # noqa: E402

            self._studies_performance = AsyncStudiesPerformanceClient(client_wrapper=self._client_wrapper)
        return self._studies_performance

    @property
    def studies_metrics(self):
        if self._studies_metrics is None:
            from .studies_metrics.client import AsyncStudiesMetricsClient  # noqa: E402

            self._studies_metrics = AsyncStudiesMetricsClient(client_wrapper=self._client_wrapper)
        return self._studies_metrics

    @property
    def studies_account(self):
        if self._studies_account is None:
            from .studies_account.client import AsyncStudiesAccountClient  # noqa: E402

            self._studies_account = AsyncStudiesAccountClient(client_wrapper=self._client_wrapper)
        return self._studies_account

    @property
    def studies_orders(self):
        if self._studies_orders is None:
            from .studies_orders.client import AsyncStudiesOrdersClient  # noqa: E402

            self._studies_orders = AsyncStudiesOrdersClient(client_wrapper=self._client_wrapper)
        return self._studies_orders

    @property
    def studies_positions(self):
        if self._studies_positions is None:
            from .studies_positions.client import AsyncStudiesPositionsClient  # noqa: E402

            self._studies_positions = AsyncStudiesPositionsClient(client_wrapper=self._client_wrapper)
        return self._studies_positions

    @property
    def studies_event_markers(self):
        if self._studies_event_markers is None:
            from .studies_event_markers.client import AsyncStudiesEventMarkersClient  # noqa: E402

            self._studies_event_markers = AsyncStudiesEventMarkersClient(client_wrapper=self._client_wrapper)
        return self._studies_event_markers

    @property
    def studies_monte_carlo(self):
        if self._studies_monte_carlo is None:
            from .studies_monte_carlo.client import AsyncStudiesMonteCarloClient  # noqa: E402

            self._studies_monte_carlo = AsyncStudiesMonteCarloClient(client_wrapper=self._client_wrapper)
        return self._studies_monte_carlo


def _get_base_url(*, base_url: typing.Optional[str] = None, environment: StratifyXEnvironment) -> str:
    if base_url is not None:
        return base_url
    elif environment is not None:
        return environment.value
    else:
        raise Exception("Please pass in either base_url or environment to construct the client")
